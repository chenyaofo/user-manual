(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{406:function(a,t,s){"use strict";s.r(t);var n=s(25),e=Object(n.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"编译cuda代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编译cuda代码"}},[a._v("#")]),a._v(" 编译CUDA代码")]),a._v(" "),s("p",[a._v("在安装一些依赖，或者编译其他CUDA代码时，需要使用NVIDIA发布的编译器nvcc，但该软件不太容易安装。因此我们提供了全局安装，方便大家使用。")]),a._v(" "),s("p",[a._v("在使用时，在安装其他软件或编译前，先执行以下以下命令以设置环境变量（"),s("a",{attrs:{href:"https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#environment-setup",target:"_blank",rel:"noopener noreferrer"}},[a._v("参考NVIDIA文档"),s("OutboundLink")],1),a._v("）：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在下列几行中选择一个版本")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CUDA_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/mnt/cephfs/smil/cuda/cuda-10.2\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# export CUDA_HOME=/mnt/cephfs/smil/cuda/cuda-11.0")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CUDA_HOME}")]),a._v("/bin"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${"),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":+")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("${"),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")]),a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[a._v("注意")]),a._v(" "),s("p",[a._v("在选择版本时，请保持CUDA_HOME引用的版本和其他库使用的版本一致，例如pytorch安装时选择的版本。")])]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),s("p",[a._v("编译好的软件在运行时也需要链接一些动态库。如果你使用pip或conda安装pytorch的话，这些都应该已经自动安装了。但如果出现找不到cuda相关动态链接库的错误，可以尝试从全局安装的目录中加载。添加以下环境变量：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("LD_LIBRARY_PATH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CUDA_HOME}")]),a._v("/lib64"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${LD_LIBRARY_PATH"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":+")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("${LD_LIBRARY_PATH}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])]),a._v(" "),s("h2",{attrs:{id:"mnt-cephfs-smil-cuda中的软件的安装方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mnt-cephfs-smil-cuda中的软件的安装方法"}},[a._v("#")]),a._v(" /mnt/cephfs/smil/cuda中的软件的安装方法")]),a._v(" "),s("p",[a._v("供大家在排查问题时参考")]),a._v(" "),s("h3",{attrs:{id:"cuda-10-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cuda-10-2"}},[a._v("#")]),a._v(" cuda-10.2")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://developer.download.nvidia.com/compute/cuda/10.2/Prod/local_installers/cuda_10.2.89_440.33.01_linux.run\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://developer.download.nvidia.com/compute/cuda/10.2/Prod/patches/1/cuda_10.2.1_linux.run\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://developer.download.nvidia.com/compute/cuda/10.2/Prod/patches/2/cuda_10.2.2_linux.run\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" +x cuda_*.run\n./cuda_10.2.89_440.33.01_linux.run --silent --toolkit --installpath"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/mnt/cephfs/smil/cuda/cuda-10.2/\n./cuda_10.2.1_linux.run --silent --toolkit --installpath"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/mnt/cephfs/smil/cuda/cuda-10.2/\n./cuda_10.2.2_linux.run --silent --toolkit --installpath"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/mnt/cephfs/smil/cuda/cuda-10.2/\n")])])]),s("h3",{attrs:{id:"cuda-11-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cuda-11-0"}},[a._v("#")]),a._v(" cuda-11.0")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://developer.download.nvidia.com/compute/cuda/11.0.3/local_installers/cuda_11.0.3_450.51.06_linux.run\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" +x cuda_*.run\n./cuda_11.0.3_450.51.06_linux.run --silent --toolkit --installpath"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/mnt/cephfs/smil/cuda/cuda-11.0/\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);